# 项目需求与功能说明（初稿）

本项目为一款 Android 平台的图片编辑 App，面向普通移动端用户，使用场景包括社交分享、日常记录与简单创意设计。  
本文件梳理了功能范围、加分项、非目标以及性能与兼容性要求，用于指导后续设计与开发。

---

## 1. 功能范围（Scope）

### 1.1 必做功能（核心功能）

1. **相册选图**

   - 支持加载手机本地图片；
   - 有两个 Tab：
     - Tab1：所有图片（按时间倒序展示）；
     - Tab2：按文件夹分类显示；
   - 处理相册权限申请及异常：
     - 用户拒绝权限 → 给出提示与重新授权引导；
     - 相册为空 → 显示占位文案与图标；
   - 实现图片缩略图的 **异步加载**，缩略图裁剪成正方形；
   - 支持图片的大图预览；
   - 支持从图片预览界面进入编辑界面（单张）。

2. **相机拍照**

   - 支持调用相机拍摄图片；
   - 拍摄完成后，图片自动导入编辑界面；
   - 处理相机权限申请；
   - 处理设备无相机的异常（如平板或模拟器）。

3. **图片缩放与平移**

   - 图片导入编辑界面后，自动适配居中显示；
   - 支持手势缩放（双指），缩放范围：0.5 倍 - 2 倍；
   - 支持拖动平移查看局部细节；
   - 缩放和平移过程流畅，无明显卡顿。

4. **图片裁剪**

   - 提供自由裁剪模式；
   - 提供固定比例裁剪：
     - 1:1、4:3、16:9、3:4、9:16；
   - 支持拖动裁剪框调整范围和位置；
   - 裁剪完成后生成新图片，图像清晰无明显畸变；
   - 裁剪过程有实时预览反馈。

5. **旋转与翻转**

   - 支持以下旋转操作：
     - 90° 顺时针；
     - 90° 逆时针；
     - 180° 旋转；
   - 支持翻转操作：
     - 水平翻转；
     - 垂直翻转；
   - 所有操作均可实时预览，支持与其他编辑操作组合使用。

6. **亮度与对比度调节**

   - 提供两个滑动条：
     - 亮度：范围 -100 ~ 100，默认 0；
     - 对比度：范围 -50 ~ 150，默认 0；
   - 调节过程中实时更新图像显示；
   - 调节逻辑基于 ColorMatrix 或像素级计算，避免明显失真；
   - 支持重置为默认值。

7. **文字编辑模块**

   - 在图片上添加文本元素；
   - 文本内容用户可自定义输入，支持换行；
   - 文本样式支持：
     - 字体：至少 3 种可选；
     - 字号：12 - 36 号可调；
     - 颜色：支持 RGB 调色或提供至少 10 个预设常用颜色；
     - 透明度：50% - 100% 可调；
   - 文字操作：
     - 可拖动到图片任意位置；
     - 支持双指缩放文字大小；
     - 支持旋转文字角度（0° - 360°）。

8. **保存模块**

   - 编辑完成后，可以将结果图片保存到系统相册；
   - 保存前对图像进行合成：
     - 底图 + 文本 + 贴纸（如有）+ 水印；
   - 保存时自动添加水印文字：**“训练营”**（位置与样式后续设计）；
   - 处理存储权限请求；
   - 处理存储失败异常：
     - 如存储空间不足、权限被永久拒绝等；
   - 保存成功后给出明确的 UI 提示（如 Toast 或 Snackbar）。

---

### 1.2 加分功能（扩展功能，视时间情况实现）

按优先级大致排序：

1. **滤镜功能**

   - 内置至少 6 种基础滤镜：
     - 原图、黑白、复古、清新、暖色调、冷色调；
   - 滤镜效果手动实现（使用 ColorMatrix 或遍历像素）；
   - 滤镜切换时，预览响应时间不超过 0.5 秒。

2. **动画过渡**

   - 从相册缩略图到大图预览时，提供平滑的缩放与位移动画；
   - 视觉上体现“从这张缩略图放大到详情页面”。

3. **贴纸功能**

   - 内置 10 种以上贴纸资源（表情、装饰元素等）；
   - 支持贴纸的拖动、缩放、旋转与删除；
   - 支持贴纸层级调整（前后顺序）。

4. **图像拼接功能**

   - 支持 2 - 4 张图片拼接；
   - 拼接模式：
     - 横向拼接；
     - 纵向拼接；
     - 2×2 网格拼接；
   - 拼接后图像边缘整齐，整体尺寸合理。

5. **夜间模式**

   - 支持日间 / 夜间主题切换；
   - 夜间模式下界面亮度降低、用色柔和。

6. **分享模块**

   - 将编辑后的图片一键分享至抖音；
   - 处理分享失败异常，给出提示。

---

### 1.3 非目标（当前不考虑范围）

- 视频编辑与滤镜；
- 多页项目编辑与工程管理；
- 跨平台（iOS）实际实现（可在文档中简单讨论）。

---

## 2. 性能与体验要求（高层）

后续会在测试计划中进一步量化，目前摘录课程要求并整理为目标指标：

1. **相册流畅度**
   - 启动相册界面时间不超过 1 秒；
   - 滑动列表帧率不低于 30fps；
   - 始终可以加载清晰的预览图。

2. **图像加载速度**
   - 相册选取或相机拍摄后，图像导入编辑界面时间不超过 1 秒；
   - 编辑过程中切换滤镜、调节参数的预览响应时间不超过 0.5 秒。

3. **内存占用**
   - 编辑单张 10MB 以内图像时，App 内存占用不超过 200MB；
   - 避免内存泄漏、OOM 导致的卡顿或崩溃。

4. **稳定性**
   - 连续编辑 10 张图像（包含裁剪、旋转、文字、保存等操作），App 不出现闪退，卡顿可接受。

5. **兼容性**
   - Android 端兼容 Android 10 及以上；
   - 在至少两种不同型号设备上实际测试通过。

---

## 3. 界面与交互要求（高层）

1. **界面设计**
   - 整体风格简洁，布局清晰；
   - 核心功能按钮如「裁剪」「文字」「保存」位置明显。

2. **交互体验**
   - 手势操作流畅（缩放、旋转、拖动）；
   - 按钮点击有反馈（颜色变化、轻微动画或震动）；
   - 编辑操作提供实时预览。

3. **适配**
   - 适配不同屏幕尺寸与分辨率；
   - 支持竖屏为主，横屏适配视时间与精力情况（可在文档中说明）。

---
